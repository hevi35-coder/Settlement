PRD: 월말정산 자동화 대시보드 (Final Ver. 1.1)
1. 개요 (Overview)
 * 1.1. 목표 요약 (Goal Summary)
   * 매월 뱅크샐러드 엑셀 파일을 업로드하여 공용지출 내역을 자동으로 추출하고, 사용자가 설정한 월급 및 고정지출액을 바탕으로 가족 계좌에 이체할 최종 금액을 계산해주는 개인용 서버리스 웹 애플리케이션을 개발한다. 이를 통해 수동 정산에 소요되는 시간을 30분에서 5분 이내로 단축시킨다.
 * 1.2. 타겟 사용자 (User Persona)
   * 매월 월급에서 공용 생활비를 정산하여 가족에게 이체하는, 효율적이고 정확한 가계 관리를 원하는 개인 사용자.
2. 기능 요구사항 (Functional Requirements)
 * 2.1. 사용자 스토리 (User Stories)
   * As a user, I want to 엑셀(.xlsx)이 포함된 압축파일(.zip)을 업로드하여 so that 시스템이 내 지출 내역을 자동으로 읽고 처리할 수 있다.
   * As a user, I want to 월급과 매달 고정적으로 나가는 지출액을 미리 설정하여 so that 매번 같은 금액을 입력할 필요 없이 자동으로 계산에 반영할 수 있다.
   * As a user, I want to 특정 기간(시작일, 종료일)을 지정하여 so that 해당 기간의 지출 내역 전체를 불러올 수 있다.
   * As a user, I want to 대시보드에서 최종 이체 금액과 그 계산 과정을 한눈에 확인하여 so that 이번 달에 얼마를 보내야 할지 즉시 알 수 있다.
   * As a user, I want to 전체 지출 목록에서 공용지출 항목을 직접 선택(체크)하여 so that 최종 계산 금액에 유연하게 반영할 수 있다.
   * As a user, I want to 월말 정산이 끝나면 [확정] 버튼을 눌러 so that 해당 월의 정산 내역을 기록하고 나중에 찾아볼 수 있다.
   * As a user, I want to 과거에 정산했던 내역들을 목록으로 조회하여 so that 월별 지출 추이를 파악할 수 있다.
 * 2.2. 기능별 상세 명세 (Feature Specifications)
   * 2.2.1. 데이터 처리
     * 파일 업로드: 사용자는 웹페이지의 파일 업로드 컴포넌트를 통해 .zip 파일을 업로드한다.
     * 압축 해제: 시스템은 업로드된 zip 파일을 사전에 설정된 비밀번호를 사용해 자동으로 압축 해제한다.
     * 엑셀 파싱: 압축 해제된 엑셀(.xlsx) 파일에서 '가계부 내역' 시트를 읽는다.
     * 데이터 추출: 사용자가 지정한 기간 내의 모든 지출 내역 데이터를 추출한다. 추출 대상 열은 날짜, 타입, 대분류, 소분류, 내용, 금액, 메모, 결제수단이다.
     * 데이터 저장: 추출된 데이터는 중복을 확인하여 데이터베이스에 신규 내역만 저장한다.
   * 2.2.2. 메인 대시보드 (정산 페이지)
     * 상단: 최종 계산 결과(가족계좌 입금액)와 그 산식(월급 - 고정이체액 - 공용지출 합계)이 표시된다.
     * 중단 (지출 목록): 데이터베이스에서 불러온 전체 지출 내역이 리스트 형태로 표시된다. 기본 표시 항목은 체크박스, 날짜, 타입, 내용, 금액, 메모이다. 모든 항목은 기본적으로 체크 해제 상태이며, 사용자가 항목을 체크 상태로 변경하면 상단 금액이 실시간으로 재계산된다. 사용자는 [확정] 버튼을 누르기 전까지 자유롭게 체크 상태를 수정할 수 있다. 각 항목의 메모란은 직접 입력 및 수정이 가능하며, 메모를 입력하면 해당 항목은 자동으로 체크 상태로 변경된다. 각 항목 클릭 시 전체 상세 정보를 담은 팝업(Modal)이 표시된다.
     * 하단 (액션 버튼): [추가] 버튼을 통해 수동으로 지출 내역을 임시 추가할 수 있다. [확정] 버튼을 통해 현재 정산 내역을 '정산 이력'으로 저장한다.
   * 2.2.3. 설정 페이지
     * 월급액, 고정이체액, 데이터 수집 기간(시작일/종료일)을 입력하고 저장하는 기능을 제공한다.
   * 2.2.4. 정산 이력 페이지
     * 과거에 [확정]된 정산 내역들이 최신순으로 요약(확정일, 월급, 고정이체액, 공용지출 합계, 최종 이체액)되어 표시된다. 각 이력 클릭 시 해당 정산에 포함되었던 상세 지출 목록을 조회할 수 있다.
 * 2.3. 엣지 케이스 및 예외 처리 (Edge Cases & Error Handling)
   * 파일 업로드 실패: 비밀번호가 틀리거나 지원하지 않는 파일 형식인 경우, "파일 처리 실패" 관련 오류 메시지를 사용자에게 표시한다.
   * 엑셀 파싱 실패: '가계부 내역' 시트 또는 필수 데이터 열을 찾을 수 없는 경우, "엑셀 형식이 올바르지 않습니다." 오류 메시지를 사용자에게 표시한다.
   * 데이터 없음: 지정된 기간 내에 조건에 맞는 데이터가 없는 경우, "해당 기간에 조회된 지출 내역이 없습니다." 메시지를 표시한다.
 * 2.4. 향후 확장 가능성 (Future Possibilities)
   * 사용자 인증: Supabase 인증 기능을 활용하여 이메일/비밀번호 또는 소셜 로그인 기능을 추가한다.
   * 다중 사용자 지원: 사용자 인증을 기반으로 가족 구성원 각자가 서비스를 사용하고 데이터를 관리하는 기능으로 확장한다.
   * 실시간 동기화: Supabase의 실시간 기능을 이용해 여러 사용자의 데이터 변경 사항을 동기화하는 기능을 추가한다.
   * 정산 이력 수정: 확정된 정산 이력에 대해 금액, 메모 등을 수정하거나 이력 자체를 삭제하는 기능을 추가한다.
3. 비기능적 요구사항 (Non-Functional Requirements)
 * 3.1. 성능 (Performance)
   * Vercel의 글로벌 엣지 네트워크를 통해 전 세계 어디서든 1초 이내의 빠른 페이지 로딩 속도를 목표로 한다.
   * 데이터 재계산 및 UI 업데이트는 즉각적으로 반응해야 한다.
 * 3.2. 보안 (Security)
   * Supabase의 RLS(Row Level Security)를 적용하여 사용자별 데이터 접근을 엄격히 통제한다.
   * Vercel이 제공하는 자동 HTTPS 및 보안 기능을 기본으로 활용한다.
   * 모든 민감 정보(API 키, 비밀번호)는 환경 변수를 통해 안전하게 관리한다.
 * 3.3. 확장성 (Scalability)
   * 서버리스 아키텍처를 기반으로 하므로, 향후 사용자가 증가하더라도 별도의 서버 작업 없이 안정적으로 서비스를 운영할 수 있다.
 * 3.4. UI/UX
   * 모바일 환경에서 우선적으로 사용성을 보장하는 반응형 디자인을 적용한다.
 * 3.5. 데이터 스키마 (Data Schema)
   * 데이터베이스는 Supabase(PostgreSQL)에 생성된다. 상세 스키마는 관련 기술 문서(TRD)를 따른다.
4. 성공 기준 (Success Metrics)
 * 본 서비스를 통해 월말 수동 정산에 소요되는 시간이 기존 30분에서 5분 이내로 단축된다.
5. 검수 기준 (Acceptance Criteria)
 * 정상적인 뱅크샐러드 zip 파일을 업로드하면, 지정된 기간의 모든 지출 내역이 화면에 표시된다.
 * [설정] 페이지에서 저장한 월급과 고정이체액이 메인 대시보드 계산에 정확히 반영된다.
 * 지출 목록의 항목을 체크하면, 상단의 합계 금액과 최종 이체액이 실시간으로 변경된다.
 * 지출 목록 항목의 메모를 직접 수정하면, 해당 항목이 자동으로 체크되며 계산에 반영된다.
 * [확정] 버튼을 누르면, 현재 정산 내역이 [정산 이력] 페이지에 저장되고 조회할 수 있다.
 * 잘못된 파일을 올리면, 적절한 오류 메시지가 사용자에게 표시된다.
 * 모바일 화면에서도 레이아웃이 깨지지 않고 모든 기능을 정상적으로 사용할 수 있다.
